{% extends "analysis/base.html" %}
{% block title %}Results - {{ hotel_name }}{% endblock %}

{% block content %}
<div class="p-8">
    <h1 class="text-3xl font-bold mb-6">Results for {{ hotel_name }}</h1>
    <p class="mb-6 text-gray-700">Total Processed Reviews: {{ review_count }}</p>

    <div class="grid grid-cols-2 gap-6">
        <div id="sentiment_container">
            <h2 class="text-xl mb-2 font-semibold">Sentiment Pie Chart</h2>
            <div id="sentiment_chart"></div>
        </div>
        <div id="trend_container">
            <h2 class="text-xl mb-2 font-semibold">Rating Trend</h2>
            <div id="trend_chart"></div>
        </div>
        <div id="country_container">
            <h2 class="text-xl mb-2 font-semibold">User Country Distribution</h2>
            <div id="country_chart"></div>
        </div>
        <div>
            <h2 class="text-xl mb-2 font-semibold">Keyword WordCloud</h2>
            <img src="{{ tags_wordcloud }}" alt="Keyword Cloud">
        </div>
    </div>
</div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    const charts = {{ charts|safe }};
    if (charts.sentiment) {
        Plotly.newPlot('sentiment_chart', charts.sentiment.data, charts.sentiment.layout);
    } else {
        document.getElementById('sentiment_container').style.display = 'none';
    }
    if (charts.trend) {
        Plotly.newPlot('trend_chart', charts.trend.data, charts.trend.layout);
    } else {
        document.getElementById('trend_container').style.display = 'none';
    }
    if (charts.country) {
        Plotly.newPlot('country_chart', charts.country.data, charts.country.layout);
    } else {
        document.getElementById('country_container').style.display = 'none';
    }
</script>
{% endblock %}
